<!-- PATIENT CONSENT CHECKBOX--->
<div class="tab-content-title-row">
    <span class="tab-content-title-row-title">
        <div class="line form-group ng-scope">
        <p>Patienten samtycker till att delta i SRS pilotprojekt</p>
        <label class="radio-inline line">
              <input type="radio" name="consent-to-srs-radio" ng-value="'JA'" ng-model="srs.consent" class="ng-pristine ng-untouched ng-valid" ng-change="setConsent('true')"> Ja</label>
        <label class="radio-inline line">
              <input type="radio" name="consent-to-srs-radio" ng-value="false" ng-model="srs.consent" class="ng-pristine ng-untouched ng-valid" ng-change="setConsent(false)"> Nej</label>
      </div>

    </span>
</div>

<!-- DIAGNOSIS HEADER--->
<div class="srs-diagnos-row" ng-class="{'has-diagnose' : srs.diagnosKod && srs.diagnosBeskrivning}">
    <div class="srs-panel-title" ng-show="srs.diagnosKod">
        <span id="srs_diagnos_heading">{{srs.diagnosKod}} - {{srs.diagnosBeskrivning}}</span>
    </div>
</div>
<wc-support-panel-scrollable-body dom-id="srs-panel-scrollable-body">
    <div class="srs-panel-body-content">

<!-- CONSENT ERROR MESSAGE -->
        <div ng-if="srs.consentError">
            <wc-srs-error-box message-string="srs.consentError"></wc-srs-error-box>
        </div>
    </div>

    <div ng-show="srs.userHasSrsFeature && srs.srsApplicable">
        <div class="srs-panel-body-content">

            <div ng-if="srs.prediktionError">
                <wc-srs-error-box message-string="srs.prediktionError"></wc-srs-error-box>
            </div>

            <!-- RISK DIAGRAM -->
            <div>
                <wc-srs-risk-diagram />
            </div>
            <div ng-show="srs.consent === 'JA' && !srs.consentError">
<!-- LÄKARENS EGEN BEDÖMNING --->
                <div id="srs-own-opinion" ng-if="srs.prediction.probabilityOverLimit">
                    <hr/>
                    <p><b>Enligt min läkarbedömning anser jag att patientens risk är</b></p>
                    <div class="srs-question">
                        <label class="radio-inline line">
                            <input type="radio" name="risk-opinion-higher" ng-value="'HOGRE'" ng-model="srs.prediction.opinion" ng-change="setOpinion('HOGRE')"/>
                            Högre
                        </label>
                        <label class="radio-inline line">
                            <input type="radio" name="risk-opinion-correct" ng-value="'KORREKT'" ng-model="srs.prediction.opinion" ng-change="setOpinion('KORREKT')"/>
                            Korrekt
                        </label>
                        <label class="radio-inline line">
                            <input type="radio" name="risk-opinion-lower" ng-value="'LAGRE'" ng-model="srs.prediction.opinion" ng-change="setOpinion('LAGRE')"/>
                            Lägre
                        </label>
                        <!-- SKALL LÄGGAS TILL NÄR TJÄNSTEKONTRAKTET UPPDATERATS MED "Kan ej bedöma" -->
<!--                        <label class="radio-inline line">-->
<!--                            <input type="radio" name="risk-opinion-kanejbedoma" ng-value="'KANEJBEDOMA'" ng-model="srs.prediction.opinion" ng-change="setOpinion('KANEJBEDOMA')"/>-->
<!--                            Kan ej bedöma-->
<!--                        </label>-->

                    </div>
                    <div ng-if="srs.prediction.opinionError">
                        <wc-srs-error-box message-string="srs.prediction.opinionError"></wc-srs-error-box>
                    </div>
                    <br />
                </div>
            </div>
        </div>
        <hr class="srs-thick-divider"/>
        <div class="srs-panel-body-content">
<!-- BERÄKNA RISK: FRÅGOR -->

            <h3 class="floatLeft">Beräkna patientens risk</h3>
            <div class="line">
                <a id="questionsCollapser" data-toggle="collapse" ng-click="isQuestionsCollapsed=!isQuestionsCollapsed" href="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                    <i class="glyphicon glyphicon-menu-down" ng-class="{'glyphicon-menu-down': isQuestionsCollapsed, 'glyphicon-menu-up': !isQuestionsCollapsed}"></i>
                </a>
            </div>
            <br/>
            <br/>
            <div id="collapseExample" class="panel-collapse collapse in">
                <wc-srs-questionaire></wc-srs-questionaire>
            </div>
        </div>
        <hr class="srs-thick-divider"/>
        <div class="srs-panel-body-content">
            <wc-srs-result></wc-srs-result>
        </div>
    </div>

    <div class="srs-panel-body-content">
        <div ng-if="srs.diagnosKod && !srs.srsApplicable" class="no-diagnose-entered">
            SRS är ej tillgängligt för diagnoskod {{srs.diagnosKod}}
        </div>

        <div ng-if="!srs.diagnosKod" class="no-diagnose-entered">
            <div dynamic-label key="srs.warn.no-diagnosis-set"></div>
        </div>
    </div>
</wc-support-panel-scrollable-body>

<div class="srs-footer">
  <span dynamiclink key="srsSkl" class="dark"></span>
</div>
