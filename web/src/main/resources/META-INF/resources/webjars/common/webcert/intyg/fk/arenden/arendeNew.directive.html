<div>

  <!-- Arende button -->
  <div ng-show="getNewArendeState() == 'new'"
       wc-check-vardenhet
       vardenhet="{{intyg.grundData.skapadAv.vardenhet.enhetsid}}">
    <div class="form-group">
      <button type="button" class="btn btn-success" ng-click="toggleArendeForm()" id="askArendeBtn">Ny fråga till
        Försäkringskassan
      </button>
    </div>
  </div>
  <div ng-if="getNewArendeState() == 'not-sent'"
       wc-check-vardenhet
       vardenhet="{{intyg.grundData.skapadAv.vardenhet.enhetsid}}" class="alert alert-info"
       id="intyg-is-not-sent-to-fk-message-text">
    <strong>Intyget är inte skickat till Försäkringskassan.</strong><br> Det går därför inte att ställa frågor om
    intyget.
  </div>
  <div ng-if="getNewArendeState() == 'no-arenden'"
       wc-check-vardenhet
       vardenhet="{{intyg.grundData.skapadAv.vardenhet.enhetsid}}" class="alert alert-info"
       id="intyg-is-not-available">
    <strong>Det finns inga frågor och svar.</strong>
  </div>

  <!-- New question form -->
  <div ng-show="localViewState.arendeNewOpen">
    <div class="form-group">
      <div class="alert alert-info">
        Här kan du föra en dialog med Försäkringskassan om ett intyg. Medicinsk information ska endast skickas via signerade intyg.
      </div>
    </div>
    <div class="form-group">
      <label class="control-label">Fråga</label>
    <textarea wc-maxlength ng-trim="false" maxlength="2000" rows="13" class="form-control"
              ng-model="arendeNewModel.frageText" wc-focus-me="localViewState.focusArende"
              id="arendeNewModelText"></textarea>
    </div>
    <div class="form-group" id="arendeNewModelForm">
      <label class="control-label">Ämne</label>
      <div class="controls">
        <select id="new-question-topic" class="form-control" ng-model="arendeNewModel.chosenTopic"
                ng-options="c.label for c in arendeNewModel.topics track by c.value"></select>
      </div>
    </div>

    <!-- error message occuring when inteacting with server for this FragaSvar-->
    <div id="arendeNewModel-load-error" ng-show="localViewState.activeErrorMessageKey" class="alert alert-danger">
      <span message key="common.arende.error.{{localViewState.activeErrorMessageKey}}"></span>
    </div>

    <!-- Form button group -->
    <div class="form-group">

      <!-- Skicka -->
      <button type="button" class="btn btn-success" ng-click="sendNewArende()"
              ng-disabled="!isArendeValidForSubmit()" title="{{localViewState.sendButtonToolTip}}"
              id="sendArendeBtn">
        <img src="/img/loader-small-green.gif" ng-show="localViewState.updateInProgress"> Skicka till
        Försäkringskassan
      </button>

      <!-- Avbryt -->
      <button type="button" class="btn btn-default btn-secondary" ng-click="toggleArendeForm()" id="cancelArendeBtn">Avbryt
        fråga
      </button>
    </div>
  </div>
  <!--  Arende formular end -->

  <!-- question sent message -->
  <div ng-if="localViewState.showSentMessage">
    <div alert type="info" close="dismissSentMessage()" id="question-is-sent-to-fk-message-text">
      <strong>Frågan är skickad till Försäkringskassan</strong><br><span wc-authority="HANTERA_MAILSVAR"> Vårdenheten kontaktas via mejl när svar har inkommit.</span>
    </div>
  </div>

</div>
