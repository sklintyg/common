<div class="latest-events">
  <div class="tag" ng-if="!hideHeader" >
    <span class="lastevent-header" dynamic-label key="listtable.headers.latestevent"></span>
    <span ng-if="!maxEvents" id="eventsshown">{{eventsShown(filteredEvents, isCollapsedArchive)}}</span>
    <ng-include ng-if="showMoreButtonLocation === 'top'" class="pull-right" src="'/web/webjars/common/minaintyg/components/latestEvents/latestEventsShowMoreButton.html'"></ng-include>
    <div style="clear:both"></div>
  </div>
  <div ng-if="filteredEvents.length > 0" ng-attr-id="event-{{certId}}">
    <div ng-repeat="event in filteredEvents track by $index" ng-if="$index < maxEventRows(isCollapsedArchive)"
         ng-init="info = getEventInfo(event)" ng-attr-id="event-{{certId}}-{{$index}}"
         ng-class="{'event-row-tight': tightRows, 'event-row': !tightRows, 'stripe-dark': !tightRows && $even}" >
      <span ng-attr-id="event-timestamp-{{certId}}-{{$index}}" class="latest-events-timestamp">{{info.timestamp}}</span>
      <latest-events-text class="event-text" ng-attr-id="event-text-{{::certId}}-{{::$index}}" text="info.text" view-cert="viewCert(type, typeVersion, id)"></latest-events-text>
    </div>
  </div>
  <ng-include ng-if="showMoreButtonLocation === 'bottom'" src="'/web/webjars/common/minaintyg/components/latestEvents/latestEventsShowMoreButton.html'"></ng-include>
  <div ng-if="filteredEvents.length == 0" data-ng-attr-class="certificate-noevents-{{certId}}">
    <div ng-attr-id="event-{{certId}}">{{messageService.getProperty('certificates.events.noevents')}}</div>
  </div>
</div>
